"filter"in Array.prototype||(Array.prototype.filter=function(e,t){"use strict";var n=[],r;for(var i=0,s=this.length;i<s;i++)i in this&&e.call(t,r=this[i],i,this)&&n.push(r);return n}),function(e,t,n,r){"use strict";function s(t,n){this.version="0.1",this.element=e(t),this.tiles=this.element.find("a"),this.options=e.extend({},i,n),this.list=[],this.cache=[],this.init()}var i={duration:300,padding:10,threshhold:50};s.prototype.init=function(){this.buildCache(),this.createEvents()},s.prototype.createCacheObj=function(e){return{elm:e,defaults:{width:parseInt(e.css("width"),10),height:parseInt(e.css("height"),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)},expanded:{width:parseInt(e.attr("width"),10),height:parseInt(e.attr("height"),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)}}},s.prototype.buildCache=function(){var t=this.tiles,n,r=t.length;for(var i=0;i<r;i++)n=e(t[i]),this.list.push(this.createCacheObj(n)),this.cache[i]=this.list[this.list.length-1],n.data("flex-cache",i)},s.prototype.createEvents=function(){var e=this;this.tiles.on("mouseenter",function(){e.change(this),e.animate("grow")}).on("mouseleave",function(){e.animate("shrink")})},s.prototype.getCache=function(t){return this.cache[e(t).data("flex-cache")]},s.prototype.animate=function(e){var t={queue:!1,duration:300},n=0;if(e==="grow")for(;n<this.changes.length;n++)this.changes[n].elm.dequeue().animate(this.changes[n].change,t);else for(;n<this.list.length;n++)this.list[n].elm.dequeue().animate(this.list[n].defaults,t),delete this.list[n].change,delete this.list[n].start,delete this.list[n].adjusted},s.prototype.getPositions=function(e){return[[e.left,e.left+e.width],[e.top,e.top+e.height]]},s.prototype.comparePositions=function(e,t){var n,r;return n=e[0]<t[0]?e:t,r=e[0]<t[0]?t:e,n[1]>r[0]||n[0]===r[0]},s.prototype.overlaps=function(e,t){var n=this.getPositions(e.change),r=this.getPositions(t.defaults);return this.comparePositions(n[0],r[0])&&this.comparePositions(n[1],r[1])},s.prototype.intersectors=function(e){var t=this.list,n=[];for(var r=0;r<t.length;r++)t[r].elm[0]!==e.elm[0]&&this.overlaps(e,t[r])&&n.push(t[r]);return n},s.prototype.adjust=function(e,t){var n,r,i,s,o={},u=t,a=!1,f=this.options.threshhold,l=this.options.padding,c=e.defaults.top>u.defaults.top+u.defaults.height,h=e.defaults.top+e.defaults.height<u.defaults.top,p=e.defaults.left<u.defaults.left,d=e.defaults.left>u.defaults.left+u.defaults.width,v=u.defaults.left+u.defaults.width>e.defaults.left;return h||c?n=e.defaults.width:d?n=e.defaults.left+e.defaults.width-(u.change.left+u.change.width)-l:n=u.change.width-e.defaults.width+l,n<f&&(n=f,a=!0),c||h?r=e.defaults.height+e.defaults.top-u.change.height-l:d?r=e.defaults.height:r=u.change.height-e.defaults.height,r<f&&(r=f,a=!0),c||h?i=e.defaults.left:d?i=u.change.left+u.change.width+l:i=u.change.left+u.change.width+l,c?s=u.change.top+u.change.height+l:s=e.defaults.top,[{width:n,height:r,left:i,top:s},a]},s.prototype.recursion=function(e){var t,n,r=this.times,i=this.changes,s,o=0,u=i.length,a,f,l=0,c;for(;o<u;o++){s=i[o];if(e&&s.elm[0]===e.elm[0]){s.start=!0,s.change=s.expanded,l++;break}if(s.change&&!s.adjusted){this.first||(this.first=!0,s.adjusted=!0),a=this.intersectors(s);for(var h=0,p=a.length;h<p;h++){f=a[h];if(!f.start&&f.elm[0]!==s.elm[0]){c=this.adjust(f,s);for(var d=0;d<i.length;d++)if(f.elm[0]===i[d].elm[0]&&!i[d].adjusted){t=i[d],n=c[0],t.change&&t.change.width===n.width&&t.change.height===n.height&&t.change.left===n.left&&t.change.top===n.top?i[d].adjusted=!0:(i[d].change=c[0],l++);break}}}}}l&&this.recursion()},s.prototype.change=function(t){var n=this.getCache(t),r=[];this.changes=e.extend(!0,[],this.list),this.first=null,this.recursion(n),this.changes=this.changes.filter(function(e){if(e.change)return e})},e.fn.flex=function(t){var n=this.data("flex"),r=t||{};return n?n:(this.each(function(){e(this).data("flex",new s(this,r))}),r.api?n:this)}}(jQuery,window,document)